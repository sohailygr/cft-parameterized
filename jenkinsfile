pipeline {
    agent any

    parameters {
        string(name: 'VPC_CIDR', defaultValue: '10.0.0.0/16', description: 'CIDR block for the VPC')
    }

    stages {
        stage('Deploy VPC') {
            steps {
                script {
                    sh "aws cloudformation create-stack --stack-name ameer-datbrick-vpc-stack --template-body file://aws-vpc.yaml --parameters ParameterKey=VpcCidrBlock,ParameterValue=${params.VPC_CIDR}"
                }
            }
        }
    }
}
